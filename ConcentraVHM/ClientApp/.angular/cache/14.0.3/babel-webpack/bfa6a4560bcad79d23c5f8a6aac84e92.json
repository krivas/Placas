{"ast":null,"code":"import { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction HomeComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"El nombre es requerido\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"El apellido es requerido\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"La c\\u00E9dula es requerida\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"La fecha de nacimiento es requerida\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"El tipo de persona es requerido\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r6.displayError);\n  }\n}\n\nfunction HomeComponent_tr_52_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function HomeComponent_tr_52_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const item_r8 = restoredCtx.$implicit;\n      const i_r9 = restoredCtx.index;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.delete(item_r8, i_r9));\n    });\n    i0.ɵɵtext(13, \"Eliminar\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.apellido);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.cedula);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.fechaNacimiento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8.tipoPersona);\n  }\n}\n\nexport class HomeComponent {\n  constructor(http, baseUrl) {\n    this.http = http;\n    this.items$ = new BehaviorSubject([]);\n    this.displayError = \"\";\n    this.cliente = {\n      nombre: \"\",\n      apellido: \"\",\n      cedula: \"\",\n      fechaNacimiento: undefined,\n      tipoPersona: undefined\n    };\n    this.loadItems(baseUrl + 'api/clientes');\n  }\n\n  loadItems(apiUrl) {\n    this.http.get(apiUrl).subscribe(result => {\n      this.items$.next(result);\n    }, error => console.error(error));\n  }\n\n  submit(form) {\n    this.displayError = \"\";\n    console.log(this.cliente);\n    console.log(form);\n    const apiUrl = 'http://localhost:44494/api/clientes';\n\n    if (form.valid) {\n      this.http.post(apiUrl, this.cliente, {\n        responseType: 'json'\n      }).subscribe(response => {\n        console.log(response);\n        this.cliente = {\n          nombre: \"\",\n          apellido: \"\",\n          cedula: \"\",\n          fechaNacimiento: undefined,\n          tipoPersona: undefined\n        };\n        form.resetForm();\n        this.loadItems(apiUrl);\n      }, error => {\n        console.error(error);\n        this.displayError = error.message;\n      });\n    }\n  }\n\n  delete(cliente, index) {\n    this.http.delete(`http://localhost:44494/api/clientes/${cliente.cedula}`).subscribe(response => {\n      console.log('Response:', response);\n      this.items$.next([cliente]); // update items$\n    }, error => {\n      console.error('Error body:', error.error);\n    });\n  }\n\n}\n\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'));\n};\n\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 54,\n  vars: 14,\n  consts: [[3, \"ngSubmit\"], [\"clienteForm\", \"ngForm\"], [1, \"mb-3\"], [\"for\", \"nombre\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"nombre\", \"name\", \"nombre\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"for\", \"apellido\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"apellido\", \"name\", \"apellido\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"cedula\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"cedula\", \"name\", \"cedula\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"fechaNacimiento\", 1, \"form-label\"], [\"type\", \"date\", \"id\", \"fechaNacimiento\", \"name\", \"fechaNacimiento\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"tipoPersona\", 1, \"form-label\"], [\"id\", \"tipoPersona\", \"name\", \"tipoPersona\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"\"], [\"value\", \"F\"], [\"value\", \"J\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-danger\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r12 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_0_listener() {\n        i0.ɵɵrestoreView(_r12);\n\n        const _r0 = i0.ɵɵreference(1);\n\n        return i0.ɵɵresetView(ctx.submit(_r0));\n      });\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"label\", 3);\n      i0.ɵɵtext(4, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"input\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_5_listener($event) {\n        return ctx.cliente.nombre = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, HomeComponent_div_6_Template, 2, 0, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 2)(8, \"label\", 6);\n      i0.ɵɵtext(9, \"Apellido\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.cliente.apellido = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(11, HomeComponent_div_11_Template, 2, 0, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 2)(13, \"label\", 8);\n      i0.ɵɵtext(14, \"C\\u00E9dula\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.cliente.cedula = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(16, HomeComponent_div_16_Template, 2, 0, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 2)(18, \"label\", 10);\n      i0.ɵɵtext(19, \"Fecha de nacimiento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"input\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_20_listener($event) {\n        return ctx.cliente.fechaNacimiento = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(21, HomeComponent_div_21_Template, 2, 0, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 2)(23, \"label\", 12);\n      i0.ɵɵtext(24, \"Tipo de persona\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"select\", 13);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_select_ngModelChange_25_listener($event) {\n        return ctx.cliente.tipoPersona = $event;\n      });\n      i0.ɵɵelementStart(26, \"option\", 14);\n      i0.ɵɵtext(27, \"Seleccionar tipo de persona\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"option\", 15);\n      i0.ɵɵtext(29, \"Persona f\\u00EDsica\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"option\", 16);\n      i0.ɵɵtext(31, \"Persona jur\\u00EDdica\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(32, HomeComponent_div_32_Template, 2, 0, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(33, \"button\", 17);\n      i0.ɵɵtext(34, \"Guardar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(35, HomeComponent_div_35_Template, 2, 1, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"h1\");\n      i0.ɵɵtext(37, \"Hello, world!\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(38, \"table\", 18)(39, \"thead\")(40, \"tr\")(41, \"th\");\n      i0.ɵɵtext(42, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"th\");\n      i0.ɵɵtext(44, \"Apellidos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"th\");\n      i0.ɵɵtext(46, \"C\\u00E9dula\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"th\");\n      i0.ɵɵtext(48, \"Fecha de nacimiento\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"th\");\n      i0.ɵɵtext(50, \"Tipo de Persona\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(51, \"tbody\");\n      i0.ɵɵtemplate(52, HomeComponent_tr_52_Template, 14, 5, \"tr\", 19);\n      i0.ɵɵpipe(53, \"async\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(1);\n\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.cliente.nombre);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r0.submitted && (_r0.controls.nombre.errors == null ? null : _r0.controls.nombre.errors.required));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.cliente.apellido);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r0.submitted && (_r0.controls.apellido.errors == null ? null : _r0.controls.apellido.errors.required));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.cliente.cedula);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r0.submitted && (_r0.controls.cedula.errors == null ? null : _r0.controls.cedula.errors.required));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.cliente.fechaNacimiento);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r0.submitted && (_r0.controls.fechaNacimiento.errors == null ? null : _r0.controls.fechaNacimiento.errors.required));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.cliente.tipoPersona);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", _r0.submitted && (_r0.controls.tipoPersona.errors == null ? null : _r0.controls.tipoPersona.errors.required));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.displayError);\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(53, 12, ctx.items$));\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm, i2.AsyncPipe],\n  encapsulation: 2\n});\nexport class Cliente {\n  constructor(nombre, apellido, cedula, fechaNacimiento, tipoPersona) {\n    this.nombre = nombre;\n    this.apellido = apellido;\n    this.cedula = cedula;\n    this.fechaNacimiento = fechaNacimiento;\n    this.tipoPersona = tipoPersona;\n  }\n\n}","map":{"version":3,"mappings":"AAAA,SAASA,UAAT,QAAwC,sBAAxC;AAGA,SAASC,eAAT,QAAgC,+BAAhC;;;;;;;;ICCIC;IAAuGA;IAAsBA;;;;;;IAK7HA;IAAyGA;IAAwBA;;;;;;IAKjIA;IAAuGA;IAAsBA;;;;;;IAK7HA;IAAgHA;IAAmCA;;;;;;IAUnJA;IAA4GA;IAA+BA;;;;;;IAG7IA;IAA8CA;IAAgBA;;;;;IAAhBA;IAAAA;;;;;;;;IAgB5CA,2BAAqD,CAArD,EAAqD,IAArD;IACMA;IAAiBA;IACrBA;IAAIA;IAAmBA;IACvBA;IAAIA;IAAiBA;IACrBA;IAAIA;IAA0BA;IAC9BA;IAAIA;IAAsBA;IAC1BA,4BAAI,EAAJ,EAAI,QAAJ,EAAI,EAAJ;IAAmCA;MAAA;MAAA;MAAA;MAAA;MAAA,OAASA,6CAAT;IAAuB,CAAvB;IAA0BA;IAAQA;;;;;IALjEA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;;;;AD3CV,OAAM,MAAOC,aAAP,CAAoB;EAMxBC,YAAoBC,IAApB,EAA0DC,OAA1D,EAAyE;IAArD;IAJpB,cAAqC,IAAIL,eAAJ,CAA+B,EAA/B,CAArC;IACA,oBAAuB,EAAvB;IACA,eAAmB;MAAGM,MAAM,EAAE,EAAX;MAAeC,QAAQ,EAAE,EAAzB;MAA6BC,MAAM,EAAE,EAArC;MAAyCC,eAAe,EAAEC,SAA1D;MAAqEC,WAAW,EAACD;IAAjF,CAAnB;IAGE,KAAKE,SAAL,CAAeP,OAAO,GAAG,cAAzB;EACD;;EAEDO,SAAS,CAACC,MAAD,EAAe;IACtB,KAAKT,IAAL,CAAUU,GAAV,CAAyBD,MAAzB,EAAiCE,SAAjC,CAA2CC,MAAM,IAAG;MAClD,KAAKC,MAAL,CAAYC,IAAZ,CAAiBF,MAAjB;IACD,CAFD,EAEGG,KAAK,IAAIC,OAAO,CAACD,KAAR,CAAcA,KAAd,CAFZ;EAGD;;EAEDE,MAAM,CAACC,IAAD,EAAa;IACjB,KAAKC,YAAL,GAAoB,EAApB;IACAH,OAAO,CAACI,GAAR,CAAY,KAAKC,OAAjB;IACAL,OAAO,CAACI,GAAR,CAAYF,IAAZ;IACA,MAAMT,MAAM,GAAG,qCAAf;;IAEA,IAAIS,IAAI,CAACI,KAAT,EAAgB;MACd,KAAKtB,IAAL,CAAUuB,IAAV,CAAwBd,MAAxB,EAAgC,KAAKY,OAArC,EAA8C;QAAEG,YAAY,EAAE;MAAhB,CAA9C,EACGb,SADH,CACac,QAAQ,IAAG;QACpBT,OAAO,CAACI,GAAR,CAAYK,QAAZ;QACA,KAAKJ,OAAL,GAAe;UAAGnB,MAAM,EAAE,EAAX;UAAeC,QAAQ,EAAE,EAAzB;UAA6BC,MAAM,EAAE,EAArC;UAAyCC,eAAe,EAAEC,SAA1D;UAAqEC,WAAW,EAACD;QAAjF,CAAf;QACAY,IAAI,CAACQ,SAAL;QACA,KAAKlB,SAAL,CAAeC,MAAf;MACD,CANH,EAMKM,KAAK,IAAG;QACTC,OAAO,CAACD,KAAR,CAAcA,KAAd;QACA,KAAKI,YAAL,GAAoBJ,KAAK,CAACY,OAA1B;MACD,CATH;IAUD;EAEF;;EACDC,MAAM,CAACP,OAAD,EAAmBQ,KAAnB,EAAgC;IACpC,KAAK7B,IAAL,CAAU4B,MAAV,CAAsB,uCAAuCP,OAAO,CAACjB,MAAM,EAA3E,EACGO,SADH,CAEIc,QAAQ,IAAG;MACTT,OAAO,CAACI,GAAR,CAAY,WAAZ,EAAyBK,QAAzB;MACA,KAAKZ,MAAL,CAAYC,IAAZ,CAAiB,CAACO,OAAD,CAAjB,EAFS,CAEoB;IAC9B,CALL,EAMIN,KAAK,IAAG;MACNC,OAAO,CAACD,KAAR,CAAc,aAAd,EAA6BA,KAAK,CAACA,KAAnC;IACD,CARL;EAUD;;AA/CuB;;;mBAAbjB,eAAaD,0DAMsB,UANtB;AAMgC;;;QAN7CC;EAAagC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;;;MCV1BrC;MAA4BA;QAAAA;;QAAA;;QAAA,OAAYA,+BAAZ;MAA+B,CAA/B;MAC1BA,+BAAkB,CAAlB,EAAkB,OAAlB,EAAkB,CAAlB;MACyCA;MAAMA;MAC7CA;MAAkEA;QAAA;MAAA;MAAlEA;MACAA;MACFA;MACAA,+BAAkB,CAAlB,EAAkB,OAAlB,EAAkB,CAAlB;MAC2CA;MAAQA;MACjDA;MAAsEA;QAAA;MAAA;MAAtEA;MACAA;MACFA;MACAA,gCAAkB,EAAlB,EAAkB,OAAlB,EAAkB,CAAlB;MACyCA;MAAMA;MAC7CA;MAAkEA;QAAA;MAAA;MAAlEA;MACAA;MACFA;MACAA,gCAAkB,EAAlB,EAAkB,OAAlB,EAAkB,EAAlB;MACkDA;MAAmBA;MACnEA;MAAoFA;QAAA;MAAA;MAApFA;MACAA;MACFA;MACAA,gCAAkB,EAAlB,EAAkB,OAAlB,EAAkB,EAAlB;MAC8CA;MAAeA;MAC3DA;MAAiEA;QAAA;MAAA;MAC/DA;MAAiBA;MAA2BA;MAC5CA;MAAkBA;MAAcA;MAChCA;MAAkBA;MAAgBA;MAGpCA;MACFA;MACAA;MAA8CA;MAAOA;MACrDA;MACFA;MAGAA;MAAIA;MAAaA;MACjBA,mCAAqB,EAArB,EAAqB,OAArB,EAAqB,EAArB,EAAqB,IAArB,EAAqB,EAArB,EAAqB,IAArB;MAGUA;MAAMA;MACVA;MAAIA;MAASA;MACbA;MAAIA;MAAMA;MACVA;MAAIA;MAAmBA;MACvBA;MAAIA;MAAeA;MAGvBA;MACEA;;MAQFA;;;;;;MArDoEA;MAAAA;MAC5DA;MAAAA;MAIgEA;MAAAA;MAChEA;MAAAA;MAI4DA;MAAAA;MAC5DA;MAAAA;MAI8EA;MAAAA;MAC9EA;MAAAA;MAI2DA;MAAAA;MAM3DA;MAAAA;MAGFA;MAAAA;MAgBiBA;MAAAA;;;;;;ADYzB,OAAM,MAAOsC,OAAP,CAAc;EAOlBpC,YAAYG,MAAZ,EAA4BC,QAA5B,EAA8CC,MAA9C,EAA8DC,eAA9D,EAAsFE,WAAtF,EAA0G;IACxG,KAAKL,MAAL,GAAcA,MAAd;IACA,KAAKC,QAAL,GAAgBA,QAAhB;IACA,KAAKC,MAAL,GAAcA,MAAd;IACA,KAAKC,eAAL,GAAuBA,eAAvB;IACA,KAAKE,WAAL,GAAkBA,WAAlB;EACD;;AAbiB","names":["HttpClient","BehaviorSubject","i0","HomeComponent","constructor","http","baseUrl","nombre","apellido","cedula","fechaNacimiento","undefined","tipoPersona","loadItems","apiUrl","get","subscribe","result","items$","next","error","console","submit","form","displayError","log","cliente","valid","post","responseType","response","resetForm","message","delete","index","selectors","decls","vars","consts","template","Cliente"],"sourceRoot":"","sources":["/Users/kevinrivas/Projects/ConcentraVHM/ConcentraVHM/ClientApp/src/app/home/home.component.ts","/Users/kevinrivas/Projects/ConcentraVHM/ConcentraVHM/ClientApp/src/app/home/home.component.html"],"sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Component, OnInit , Inject} from '@angular/core';\nimport {NgForm} from '@angular/forms';\nimport { BehaviorSubject } from 'rxjs/internal/BehaviorSubject';\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n})\nexport class HomeComponent {\n \n  items$: BehaviorSubject<Cliente[]> = new BehaviorSubject<Cliente[]>([]);\n  displayError: string = \"\";\n  cliente: Cliente = {  nombre: \"\", apellido: \"\", cedula: \"\", fechaNacimiento: undefined ,tipoPersona:undefined};\n  \n  constructor(private http: HttpClient, @Inject('BASE_URL') baseUrl: string) {\n    this.loadItems(baseUrl + 'api/clientes');\n  }\n\n  loadItems(apiUrl: string): void {\n    this.http.get<Cliente[]>(apiUrl).subscribe(result => {\n      this.items$.next(result);\n    }, error => console.error(error));\n  }\n\n  submit(form: NgForm): void {\n    this.displayError = \"\";\n    console.log(this.cliente);\n    console.log(form);\n    const apiUrl = 'http://localhost:44494/api/clientes';\n\n    if (form.valid) {\n      this.http.post<Cliente>(apiUrl, this.cliente, { responseType: 'json' })\n        .subscribe(response => {\n          console.log(response);\n          this.cliente = {  nombre: \"\", apellido: \"\", cedula: \"\", fechaNacimiento: undefined ,tipoPersona:undefined};\n          form.resetForm();\n          this.loadItems(apiUrl);\n        }, error => {\n          console.error(error);\n          this.displayError = error.message;\n        });\n    }\n    \n  }\n  delete(cliente: Cliente, index: number) {\n    this.http.delete<any>(`http://localhost:44494/api/clientes/${cliente.cedula}`)\n      .subscribe(\n        response => {\n          console.log('Response:', response);\n          this.items$.next([cliente]); // update items$\n        },\n        error => {\n          console.error('Error body:', error.error);\n        }\n      );\n  }\n\n}\nexport class Cliente {\n  nombre:string;\n  apellido: string;\n  cedula: string;\n  fechaNacimiento?: Date;\n  tipoPersona?:string;\n\n  constructor(nombre: string, apellido: string, cedula: string, fechaNacimiento?: Date, tipoPersona?: string) {\n    this.nombre = nombre;\n    this.apellido = apellido;\n    this.cedula = cedula;\n    this.fechaNacimiento = fechaNacimiento;\n    this.tipoPersona= tipoPersona;\n  }\n\n}\n\n\n\n","<form #clienteForm=\"ngForm\" (ngSubmit)=\"submit(clienteForm)\">\n  <div class=\"mb-3\">\n    <label for=\"nombre\" class=\"form-label\">Nombre</label>\n    <input type=\"text\" id=\"nombre\" name=\"nombre\" class=\"form-control\" [(ngModel)]=\"cliente.nombre\" required>\n    <div *ngIf=\"clienteForm.submitted && clienteForm.controls.nombre.errors?.required\" class=\"text-danger\">El nombre es requerido</div>\n  </div>\n  <div class=\"mb-3\">\n    <label for=\"apellido\" class=\"form-label\">Apellido</label>\n    <input type=\"text\" id=\"apellido\" name=\"apellido\" class=\"form-control\" [(ngModel)]=\"cliente.apellido\" required>\n    <div *ngIf=\"clienteForm.submitted && clienteForm.controls.apellido.errors?.required\" class=\"text-danger\">El apellido es requerido</div>\n  </div>\n  <div class=\"mb-3\">\n    <label for=\"cedula\" class=\"form-label\">Cédula</label>\n    <input type=\"text\" id=\"cedula\" name=\"cedula\" class=\"form-control\" [(ngModel)]=\"cliente.cedula\" required>\n    <div *ngIf=\"clienteForm.submitted && clienteForm.controls.cedula.errors?.required\" class=\"text-danger\">La cédula es requerida</div>\n  </div>\n  <div class=\"mb-3\">\n    <label for=\"fechaNacimiento\" class=\"form-label\">Fecha de nacimiento</label>\n    <input type=\"date\" id=\"fechaNacimiento\" name=\"fechaNacimiento\" class=\"form-control\" [(ngModel)]=\"cliente.fechaNacimiento\" required>\n    <div *ngIf=\"clienteForm.submitted && clienteForm.controls.fechaNacimiento.errors?.required\" class=\"text-danger\">La fecha de nacimiento es requerida</div>\n  </div>\n  <div class=\"mb-3\">\n    <label for=\"tipoPersona\" class=\"form-label\">Tipo de persona</label>\n    <select id=\"tipoPersona\" name=\"tipoPersona\" class=\"form-control\" [(ngModel)]=\"cliente.tipoPersona\" required>\n      <option value=\"\">Seleccionar tipo de persona</option>\n      <option value=\"F\">Persona física</option>\n      <option value=\"J\">Persona jurídica</option>\n    </select>\n  \n    <div *ngIf=\"clienteForm.submitted && clienteForm.controls.tipoPersona.errors?.required\" class=\"text-danger\">El tipo de persona es requerido</div>\n  </div>\n  <button type=\"submit\" class=\"btn btn-primary\">Guardar</button>\n  <div *ngIf=\"displayError\" class=\"text-danger\">{{displayError}}</div>\n</form>\n\n\n<h1>Hello, world!</h1>\n<table class=\"table\">\n  <thead>\n    <tr>\n      <th>Nombre</th>\n      <th>Apellidos</th>\n      <th>Cédula</th>\n      <th>Fecha de nacimiento</th>\n      <th>Tipo de Persona</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr *ngFor=\"let item of items$ | async ;let i=index\">\n      <td>{{ item.nombre }}</td>\n      <td>{{ item.apellido }}</td>\n      <td>{{ item.cedula }}</td>\n      <td>{{ item.fechaNacimiento }}</td>\n      <td>{{ item.tipoPersona }}</td>\n      <td><button class=\"btn btn-danger\" (click)=\"delete(item,i)\" >Eliminar</button></td>\n    </tr>\n  </tbody>\n</table>"]},"metadata":{},"sourceType":"module"}